# =============================================================================
# SPEED-OPTIMIZED Training Configuration for Jinx Ability Detection
# =============================================================================
# Use this config for fast iteration during development/experimentation.
# Trade-off: Slightly lower accuracy for significantly faster training.
#
# Usage:
#   python src/training/train_yolo.py \
#       --data configs/jinx_abilities.yaml \
#       --config configs/training_speed.yaml \
#       --name jinx_speed
#
# Expected training time: ~15-30 minutes on MPS/GPU (vs ~5 hours on CPU)
# =============================================================================

# Model Configuration
model:
  base: yolov8n.pt      # Nano model - fastest inference and training
  nc: 5                 # 5 classes: IDLE, W_PROJ, W_IMPACT, R_ROCKET, R_IMPACT

# Training Hyperparameters (speed-optimized)
training:
  epochs: 50            # Reduced from 100 - early stopping will kick in if needed
  batch_size: 32        # Increased from 16 - better GPU utilization
  image_size: 480       # Reduced from 640 - faster processing, still detects VFX
  patience: 15          # Reduced - stop earlier if no improvement
  
  # Optimizer (defaults are fine for speed)
  optimizer: auto       # Let YOLO choose optimal optimizer
  learning_rate: 0.01   # Default YOLO lr
  weight_decay: 0.0005
  momentum: 0.937
  
  # Learning rate scheduler
  lr_scheduler: cosine
  warmup_epochs: 2      # Reduced warmup for faster convergence

# Optimizations (key speed settings)
optimizations:
  cache: true           # CRITICAL: Cache images in RAM - major speedup
  workers: 4            # Optimal for Mac - higher can cause issues
  rect: true            # Rectangular training - reduces padding overhead
  cos_lr: true          # Cosine LR annealing - better convergence
  close_mosaic: 5       # Disable mosaic earlier - faster final epochs
  amp: true             # Mixed precision - faster on supported hardware

# Data Augmentation (lighter for speed)
augmentation:
  # Color augmentation (reduced)
  hsv_h: 0.01           # Minimal hue shift - VFX colors are distinctive
  hsv_s: 0.4            # Reduced saturation augmentation
  hsv_v: 0.3            # Reduced value augmentation
  
  # Geometric (minimal - LoL UI is fixed)
  degrees: 0.0          # No rotation - game UI is fixed
  translate: 0.1        # Slight translation
  scale: 0.3            # Reduced scale - preserve small objects
  shear: 0.0            # No shear
  perspective: 0.0      # No perspective
  
  # Flips
  flipud: 0.0           # No vertical flip
  fliplr: 0.5           # Horizontal flip OK - game is symmetric
  
  # Advanced (reduced for speed)
  mosaic: 0.5           # Reduced - less compute, preserve object integrity
  mixup: 0.0            # Disabled - not helpful for this task
  copy_paste: 0.0       # Disabled for speed
  erasing: 0.0          # Disabled - don't erase small VFX

# Validation
validation:
  val_interval: 1       # Validate every epoch (needed for early stopping)
  conf_threshold: 0.25
  iou_threshold: 0.45

# Output
output:
  project: runs/detect
  name: jinx_speed
  save_period: 10
  plots: true




